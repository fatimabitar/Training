<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Fourth Test</title>
  </head>
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Tajawal:wght@200;300;400;500;700&display=swap"
    rel="stylesheet"
  />
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: "Tajawal", sans-serif;
    }
    body {
      position: relative;
      overflow: hidden;
    }
    .test-explanation {
      width: 100%;
      height: 100vh;
      z-index: 10000;
      position: fixed;
      left: 0;
      top: 0;
      background: #fff;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }
    .test-explanation > p {
      width: 80%;
      text-align: center;
      line-height: 1.7;
      font-size: 17px;
    }
    .arbic {
      text-align: right;
    }
    .en {
      text-align: left;
      margin-top: 50px !important;
    }
    .counter {
      position: fixed;
      left: 0%;
      top: 5%;
      font-weight: bold;
      font-size: 20px;
      background: #fff;
      padding: 20px;
    }
    .balls-container {
      width: 100%;
      height: 100vh;
      overflow: hidden;
      position: relative;
      display: flex;
      flex-direction: column;
    }

    .balls {
      height: calc(100vh - 100px);
    }
    .ball {
      width: 55px;
      height: 55px;
      border-radius: 50%;
      -webkit-border-radius: 50%;
      -moz-border-radius: 50%;
      -ms-border-radius: 50%;
      -o-border-radius: 50%;
      display: grid;
      place-items: center;
      font-weight: bold;
      position: fixed;
      top: 50%;
      left: 50%;
      background: #5baab4;
      border: 1px solid #000;
      font-family: "fontello";
      cursor: pointer;
    }
    .inner-ball {
      width: 55px;
      height: 55px;
      border-radius: 50%;
      -webkit-border-radius: 50%;
      -moz-border-radius: 50%;
      -ms-border-radius: 50%;
      -o-border-radius: 50%;
      display: grid;
      place-items: center;
      background: #70c6d1;
      border: 1px solid #000;
      font-family: "fontello";
      font-style: normal;
      font-weight: normal;
      font-size: 30px;
    }
    .arrows {
      width: 55%;
      height: 75px;
      border: 1px solid #000;
      margin: 0 auto;
      display: flex;
    }
    .arrow {
      width: 25%;
      height: 100%;
      border-left: 1px solid #000;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .arrow:first-child {
      border-left: none;
    }

    @font-face {
      font-family: "fontello";
      src: url("./font/fontello.eot?57831825");
      src: url("./font/fontello.eot?57831825#iefix") format("embedded-opentype"),
        url("./font/fontello.woff?57831825") format("woff"),
        url("./font/fontello.ttf?57831825") format("truetype"),
        url("./font/fontello.svg?57831825#fontello") format("svg");
      font-weight: normal;
      font-style: normal;
    }

    .s0 {
      font-size: 20px;
    }
    .s1 {
      font-size: 24px;
    }
    .s2 {
      font-size: 28px;
    }
    .s3 {
      font-size: 32px;
    }
    .s4 {
      font-size: 36px;
    }
    .warning {
      width: 100%;
      height: 100vh;
      z-index: 15000;
      display: none;
      position: fixed;
      left: 0;
      top: 0;
      background: #fff;
    }
    .warning > p {
      position: fixed;
      left: 50%;
      top: 50%;
      transform: translate(-50%);
      font-size: 18px;
    }
    /* @media (max-width: 1500px) {
      .warning {
        display: block;
      }
    } */
  </style>
  <body>
    <div class="warning">
      <p>البرنامج التدريبي مخصص للشاشات بحجم 15.6 فقط</p>
    </div>
    <div class="test-explanation">
      <p class="arabic">
        لدينا 20 كرة بداخلها اسهم مختلفة بالحجم , كل سهم مكرر 5 مرات بأحجام
        مختلفة, عند بدء الاختبار سيضيء أحد الأسهم باللون الأخضر,
        <strong>
          المطلوب منك الضغط بالفأرة على الخمسة تكرارات للسهم المضاء بالاخضر قبل
          انتهاء الوقت المحدد</strong
        >
      </p>
      <p class="en">
        We have 20 balls with arrows of different size inside, each arrow
        repeated 5 times different, when you start the test one of the arrows
        will light green,
        <strong>
          You are required to click with the mouse on the five repetitions of
          the arrow lit up green before The time limit has expired.</strong
        >
      </p>
    </div>
    <div class="counter"><span id="seconds"></span> Seconds</div>
    <div class="balls-container">
      <div class="balls"></div>
      <div class="arrows">
        <div class="arrow">
          <div class="inner-ball left">&#xe802;</div>
        </div>
        <div class="arrow">
          <div class="inner-ball right">&#xe800;</div>
        </div>
        <div class="arrow">
          <div class="inner-ball up">&#xe803;</div>
        </div>
        <div class="arrow">
          <div class="inner-ball down">&#xe801;</div>
        </div>
      </div>
    </div>
    <script
      src="https://code.jquery.com/jquery-3.6.0.min.js"
      integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
      crossorigin="anonymous"
    ></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
    <script>
      //Global Values
      const balls = document.querySelector(".balls");
      const ballsContainer = document.querySelector(".balls-container");
      let duration = 4000; /* Balls Speed */
      let levelTime = 30000;

      /* Total Points - code in line 618 */
      let totalPoints = 0;
      let points1 = 0;
      let points2 = 0;
      let points3 = 0;
      let points4 = 0;

      //A function to shuffle an array
      function shuffle(array) {
        let currentIndex = array.length,
          randomIndex;
        while (currentIndex !== 0) {
          // Pick a remaining element...
          randomIndex = Math.floor(Math.random() * currentIndex);
          currentIndex--;
          [array[currentIndex], array[randomIndex]] = [
            array[randomIndex],
            array[currentIndex],
          ];
        }
        return array;
      }
      const bottomArrows = ["up", "down", "right", "left"];
      const shuffeledArrows = shuffle(bottomArrows);
      let result1 = [];
      let result2 = [];
      let result3 = [];
      let result4 = [];

      //Random arrow picker
      const newArrow = (shuffeledArrows) => {
        let randomIndex = Math.floor(Math.random() * bottomArrows.length);
        const nextArrow = bottomArrows[randomIndex];
        bottomArrows.splice(randomIndex, 1);
        const nextArrowNode = document.querySelector(`.arrow > .${nextArrow}`);
        nextArrowNode.parentElement.style.background = "#28D755";
        return [shuffeledArrows, nextArrow, nextArrowNode];
      };

      //Generate Balls
      const generate = () => {
        //arrow left
        for (let i = 0; i < 5; i++) {
          const ball = document.createElement("div");
          ball.classList.add("ball");
          ball.classList.add("left");
          ball.classList.add(`ball-${i}`);
          /* s class represents the arrow size */
          ball.classList.add(`s${i}`);
          balls.appendChild(ball);
          ball.innerHTML = "&#xe802";
        }
        //arrow right
        for (let i = 0; i < 5; i++) {
          const ball = document.createElement("div");
          ball.classList.add("ball");
          ball.classList.add("right");
          ball.classList.add(`ball-${i + 5}`);
          ball.classList.add(`s${i}`);
          balls.appendChild(ball);
          ball.innerHTML = "&#xe800";
        }
        //arrow up
        for (let i = 0; i < 5; i++) {
          const ball = document.createElement("div");
          ball.classList.add("ball");
          ball.classList.add("up");
          ball.classList.add(`ball-${i + 10}`);
          ball.classList.add(`s${i}`);
          balls.appendChild(ball);
          ball.innerHTML = "&#xe803";
        }
        //arrow down
        for (let i = 0; i < 5; i++) {
          const ball = document.createElement("div");
          ball.classList.add("ball");
          ball.classList.add("down");
          ball.classList.add(`ball-${i + 15}`);
          ball.classList.add(`s${i}`);
          balls.appendChild(ball);
          ball.innerHTML = "&#xe801";
        }
      };

      //Random Balls movement
      function makeNewPosition() {
        const w = balls.getBoundingClientRect().width - 50;
        const h = 550;
        const nh = Math.floor(Math.random() * h);
        const nw = Math.floor(Math.random() * w);
        return [nh, nw];
      }
      function animateDiv(myclass) {
        const newq = makeNewPosition();
        $(myclass).animate(
          { top: newq[0], left: newq[1] },
          duration,
          function () {
            animateDiv(myclass);
          }
        );
      }

      //Arrow Tracking
      const firstTracking = (currentArrow) => {
        const arrowUp = document.querySelectorAll(".up");
        const arrowDown = document.querySelectorAll(".down");
        const arrowLeft = document.querySelectorAll(".left");
        const arrowRight = document.querySelectorAll(".right");
        console.log(currentArrow);
        arrowUp.forEach((item) => {
          item.addEventListener("click", () => {
            if (item.classList.contains(currentArrow)) {
              if (result1.length <= 5) {
                result1.push(true);
                item.style.background = "#fff";
                item.style.pointerEvents = "none";
              }
              if (result1.length === 5) {
                console.log(result1);
                return;
              }
            } else {
              if (result1.length <= 5) {
                result1.push(false);
                item.style.background = "#f44";
                item.style.pointerEvents = "none";
              }
              if (result1.length === 5) {
                console.log(result1);
                return;
              }
            }
          });
        });
        arrowDown.forEach((item) => {
          item.addEventListener("click", () => {
            if (item.classList.contains(currentArrow)) {
              if (result1.length <= 5) {
                result1.push(true);
                item.style.background = "#fff";
                item.style.pointerEvents = "none";
              }
              if (result1.length === 5) {
                console.log(result1);
                return;
              }
            } else {
              if (result1.length <= 5) {
                result1.push(false);
                item.style.background = "#f44";
                item.style.pointerEvents = "none";
              }
              if (result1.length === 5) {
                console.log(result1);
                return;
              }
            }
          });
        });
        arrowLeft.forEach((item) => {
          item.addEventListener("click", () => {
            if (item.classList.contains(currentArrow)) {
              if (result1.length <= 5) {
                result1.push(true);
                item.style.background = "#fff";
                item.style.pointerEvents = "none";
              }
              if (result1.length === 5) {
                console.log(result1);
                return;
              }
            } else {
              if (result1.length <= 5) {
                result1.push(false);
                item.style.background = "#f44";
                item.style.pointerEvents = "none";
              }
              if (result1.length === 5) {
                console.log(result1);
                return;
              }
            }
          });
        });
        arrowRight.forEach((item) => {
          item.addEventListener("click", () => {
            if (item.classList.contains(currentArrow)) {
              if (result1.length <= 5) {
                result1.push(true);
                item.style.background = "#fff";
                item.style.pointerEvents = "none";
              }
              if (result1.length === 5) {
                console.log(result1);
                return;
              }
            } else {
              if (result1.length <= 5) {
                result1.push(false);
                item.style.background = "#f44";
                item.style.pointerEvents = "none";
              }
              if (result1.length === 5) {
                console.log(result1);
                return;
              }
            }
          });
        });
        return result1;
      };
      const secondTracking = (currentArrow) => {
        const arrowUp1 = document.querySelectorAll(".up");
        const arrowDown1 = document.querySelectorAll(".down");
        const arrowLeft1 = document.querySelectorAll(".left");
        const arrowRight1 = document.querySelectorAll(".right");
        console.log(currentArrow);
        arrowUp1.forEach((item) => {
          item.addEventListener("click", () => {
            if (item.classList.contains(currentArrow)) {
              if (result2.length <= 5) {
                result2.push(true);
                item.style.background = "#fff";
                item.style.pointerEvents = "none";
              }
              if (result2.length === 5) {
                console.log(result2);
                return;
              }
            } else {
              if (result2.length <= 5) {
                result2.push(false);
                item.style.background = "#f44";
                item.style.pointerEvents = "none";
              }
              if (result2.length === 5) {
                console.log(result2);
                return;
              }
            }
          });
        });
        arrowDown1.forEach((item) => {
          item.addEventListener("click", () => {
            if (item.classList.contains(currentArrow)) {
              if (result2.length <= 5) {
                result2.push(true);
                item.style.background = "#fff";
                item.style.pointerEvents = "none";
              }
              if (result2.length === 5) {
                console.log(result2);
                return;
              }
            } else {
              if (result2.length <= 5) {
                result2.push(false);
                item.style.background = "#f44";
                item.style.pointerEvents = "none";
              }
              if (result2.length === 5) {
                console.log(result2);
                return;
              }
            }
          });
        });
        arrowLeft1.forEach((item) => {
          item.addEventListener("click", () => {
            if (item.classList.contains(currentArrow)) {
              if (result2.length <= 5) {
                result2.push(true);
                item.style.background = "#fff";
                item.style.pointerEvents = "none";
              }
              if (result2.length === 5) {
                console.log(result2);
                return;
              }
            } else {
              if (result2.length <= 5) {
                result2.push(false);
                item.style.background = "#f44";
                item.style.pointerEvents = "none";
              }
              if (result2.length === 5) {
                console.log(result2);
                return;
              }
            }
          });
        });
        arrowRight1.forEach((item) => {
          item.addEventListener("click", () => {
            if (item.classList.contains(currentArrow)) {
              if (result2.length <= 5) {
                result2.push(true);
                item.style.background = "#fff";
                item.style.pointerEvents = "none";
              }
              if (result2.length === 5) {
                console.log(result2);
                return;
              }
            } else {
              if (result2.length <= 5) {
                result2.push(false);
                item.style.background = "#f44";
                item.style.pointerEvents = "none";
              }
              if (result2.length === 5) {
                console.log(result2);
                return;
              }
            }
          });
        });
        return result2;
      };
      const thirdTracking = (currentArrow) => {
        const arrowUp2 = document.querySelectorAll(".up");
        const arrowDown2 = document.querySelectorAll(".down");
        const arrowLeft2 = document.querySelectorAll(".left");
        const arrowRight2 = document.querySelectorAll(".right");
        console.log(currentArrow);
        arrowUp2.forEach((item) => {
          item.addEventListener("click", () => {
            if (item.classList.contains(currentArrow)) {
              if (result3.length <= 5) {
                result3.push(true);
                item.style.background = "#fff";
                item.style.pointerEvents = "none";
              }
              if (result3.length === 5) {
                console.log(result3);
                return;
              }
            } else {
              if (result3.length <= 5) {
                result3.push(false);
                item.style.background = "#f44";
                item.style.pointerEvents = "none";
              }
              if (result3.length === 5) {
                console.log(result3);
                return;
              }
            }
          });
        });
        arrowDown2.forEach((item) => {
          item.addEventListener("click", () => {
            if (item.classList.contains(currentArrow)) {
              if (result3.length <= 5) {
                result3.push(true);
                item.style.background = "#fff";
                item.style.pointerEvents = "none";
              }
              if (result3.length === 5) {
                console.log(result3);
                return;
              }
            } else {
              if (result3.length <= 5) {
                result3.push(false);
                item.style.background = "#f44";
                item.style.pointerEvents = "none";
              }
              if (result3.length === 5) {
                console.log(result3);
                return;
              }
            }
          });
        });
        arrowLeft2.forEach((item) => {
          item.addEventListener("click", () => {
            if (item.classList.contains(currentArrow)) {
              if (result3.length <= 5) {
                result3.push(true);
                item.style.background = "#fff";
                item.style.pointerEvents = "none";
              }
              if (result3.length === 5) {
                console.log(result3);
                return;
              }
            } else {
              if (result3.length <= 5) {
                result3.push(false);
                item.style.background = "#f44";
                item.style.pointerEvents = "none";
              }
              if (result3.length === 5) {
                console.log(result3);
                return;
              }
            }
          });
        });
        arrowRight2.forEach((item) => {
          item.addEventListener("click", () => {
            if (item.classList.contains(currentArrow)) {
              if (result3.length <= 5) {
                result3.push(true);
                item.style.background = "#fff";
                item.style.pointerEvents = "none";
              }
              if (result3.length === 5) {
                console.log(result3);
                return;
              }
            } else {
              if (result3.length <= 5) {
                result3.push(false);
                item.style.background = "#f44";
                item.style.pointerEvents = "none";
              }
              if (result3.length === 5) {
                console.log(result3);
                return;
              }
            }
          });
        });
        return result3;
      };
      const fourthTracking = (currentArrow) => {
        const arrowUp3 = document.querySelectorAll(".up");
        const arrowDown3 = document.querySelectorAll(".down");
        const arrowLeft3 = document.querySelectorAll(".left");
        const arrowRight3 = document.querySelectorAll(".right");
        console.log(currentArrow);
        arrowUp3.forEach((item) => {
          item.addEventListener("click", () => {
            if (item.classList.contains(currentArrow)) {
              if (result4.length <= 5) {
                result4.push(true);
                item.style.background = "#fff";
                item.style.pointerEvents = "none";
              }
              if (result4.length === 5) {
                console.log(result4);
                return;
              }
            } else {
              if (result4.length <= 5) {
                result4.push(false);
                item.style.background = "#f44";
                item.style.pointerEvents = "none";
              }
              if (result4.length === 5) {
                console.log(result4);
                return;
              }
            }
          });
        });
        arrowDown3.forEach((item) => {
          item.addEventListener("click", () => {
            if (item.classList.contains(currentArrow)) {
              if (result4.length <= 5) {
                result4.push(true);
                item.style.background = "#fff";
                item.style.pointerEvents = "none";
              }
              if (result4.length === 5) {
                console.log(result4);
                return;
              }
            } else {
              if (result4.length <= 5) {
                result4.push(false);
                item.style.background = "#f44";
                item.style.pointerEvents = "none";
              }
              if (result4.length === 5) {
                console.log(result4);
                return;
              }
            }
          });
        });
        arrowLeft3.forEach((item) => {
          item.addEventListener("click", () => {
            if (item.classList.contains(currentArrow)) {
              if (result4.length <= 5) {
                result4.push(true);
                item.style.background = "#fff";
                item.style.pointerEvents = "none";
              }
              if (result4.length === 5) {
                console.log(result4);
                return;
              }
            } else {
              if (result4.length <= 5) {
                result4.push(false);
                item.style.background = "#f44";
                item.style.pointerEvents = "none";
              }
              if (result4.length === 5) {
                console.log(result4);
                return;
              }
            }
          });
        });
        arrowRight3.forEach((item) => {
          item.addEventListener("click", () => {
            if (item.classList.contains(currentArrow)) {
              if (result4.length <= 5) {
                result4.push(true);
                item.style.background = "#fff";
                item.style.pointerEvents = "none";
              }
              if (result4.length === 5) {
                console.log(result4);
                return;
              }
            } else {
              if (result4.length <= 5) {
                result4.push(false);
                item.style.background = "#f44";
                item.style.pointerEvents = "none";
              }
              if (result4.length === 5) {
                console.log(result4);
                return;
              }
            }
          });
        });
        return result4;
      };
      const restart = () => {
        try {
          const innerBall = document.querySelectorAll(".arrow");
          innerBall.forEach((item) => {
            item.style.background = "#fff";
          });
          const ball = document.querySelectorAll(".ball");
          ball.forEach((item) => {
            item.style.background = "#5baab4";
            item.style.pointerEvents = "auto";
          });
        } catch (error) {
          console.error();
        }
      };

      setTimeout(() => {
        let [arrowsList, currentArrow, nextArrowNode] =
          newArrow(shuffeledArrows);
        firstTracking(currentArrow);
        let timeleft = levelTime / 1000;
        let downloadTimer = setInterval(function () {
          timeleft--;
          document.querySelector("#seconds").textContent = timeleft;
          if (timeleft <= 0) clearInterval(downloadTimer);
        }, 1000);
      }, 6500);
      setTimeout(() => {
        restart();
        let [arrowsList, currentArrow, nextArrowNode] =
          newArrow(shuffeledArrows);
        secondTracking(currentArrow);
        let timeleft = levelTime / 1000;
        let downloadTimer = setInterval(function () {
          timeleft--;
          document.querySelector("#seconds").textContent = timeleft;
          if (timeleft <= 0) clearInterval(downloadTimer);
        }, 1000);
      }, levelTime + 6500);
      setTimeout(() => {
        restart();
        let [arrowsList, currentArrow, nextArrowNode] =
          newArrow(shuffeledArrows);
        thirdTracking(currentArrow);
        let timeleft = levelTime / 1000;
        let downloadTimer = setInterval(function () {
          timeleft--;
          document.querySelector("#seconds").textContent = timeleft;
          if (timeleft <= 0) clearInterval(downloadTimer);
        }, 1000);
      }, levelTime * 2 + 6500);
      setTimeout(() => {
        restart();
        let [arrowsList, currentArrow, nextArrowNode] =
          newArrow(shuffeledArrows);
        fourthTracking(currentArrow);
        let timeleft = levelTime / 1000;
        let downloadTimer = setInterval(function () {
          timeleft--;
          document.querySelector("#seconds").textContent = timeleft;
          if (timeleft <= 0) clearInterval(downloadTimer);
        }, 1000);
      }, levelTime * 3 + 6500);
      setTimeout(() => {
        result1.map((item) => {
          if (item === true) {
            points1 += 1;
          }
        });
        result2.map((item) => {
          if (item === true) {
            points2 += 1;
          }
        });
        result3.map((item) => {
          if (item === true) {
            points3 += 1;
          }
        });
        result4.map((item) => {
          if (item === true) {
            points4 += 1;
          }
        });
        totalPoints = points1 + points2 + points3 + points4;
        window.location = "../fifth/fifth.html";
      }, levelTime * 4);

      const tl = gsap.timeline();
      tl.to(".test-explanation", 6, {
        display: "none",
      });
      window.addEventListener("load", () => {
        generate();
        for (let i = 0; i < 20; i++) {
          animateDiv(`.ball-${i}`);
        }
      });
    </script>
  </body>
</html>
